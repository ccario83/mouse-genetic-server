
<% user ||= @user %>
<% group ||= @group %>
<% members ||= @members %> 
<% show_listing_on_load ||= false %>
<div class="row-fluid title-bar">
	<div class="drop-panel">
		<i id="collapse-members" class="icon-chevron-down"></i>
	</div>
	<div class="title-panel">
		<span class="title"> Members </span>
	</div>
	<div class="icon-panel">
		<i class="icon-number"> <%= group.members.count %> </i>
		
		<i id="add-group" class="icon-plus" onclick="$('#new-group').modal('show'); return false;"></i>
		<% if (group.creator == user) %>
			<i class="icon-edit" onclick="$('#manage-members').modal('show'); return false;"></i>
		<% else %>
			<i class="disabled icon-edit"></i>
		<% end %>
		<i class="disabled icon-share"></i>
	</div>
</div>

<div id="manage-members" class="modal hide">
	<%= render 'member_management_form', preselected_ids: members.map(&:id) %>
</div>

<div id="member-listing" <% if not show_listing_on_load %> style="display:none;" <% end %>>
	<% if members.any? %>
	<ul class="members">
		<%= render members %>
	</ul>
	<%= will_paginate members, :param_name => 'members_paginate' %>
	<% end %>
</div>

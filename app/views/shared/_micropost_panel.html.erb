
<% user ||= @user %>
<% viewer ||= user %>
<% microposts ||= @microposts ||= viewer.all_received_posts %>
<% confirmed_groups ||= user.confirmed_groups.sort_by(&:name) %>
<% show_listing_on_load ||= false %>
<div class="row-fluid title-bar">
	<div class="drop-panel">
		<i id="collapse-microposts" class="icon-chevron-down"></i>
	</div>
	<div class="title-panel">
		<span class="title"> Microposts </span>
	</div>
	<div class="icon-panel">
		<i class="icon-number"> <%= viewer.all_received_posts.count %> </i>
		
		<i class="icon-plus" data-toggle="modal" data-target="#new-micropost"></i>
		<i class="disabled icon-list"></i>
	</div>
</div>

<div id="new-micropost" class="modal hide fade">
	<%= render 'shared/micropost_form', groups: confirmed_groups %>
</div>

<div id="micropost-listing">
		<% if microposts.any? %>
		<ol class="microposts">
			<%= render :partial =>'shared/micropost', :collection => microposts %>
		</ol>
		<%= will_paginate microposts, :param_name => 'microposts_paginate', :inner_window => 1, :outer_window => 1 %>
		<% end %>
</div>
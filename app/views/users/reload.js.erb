

<% flash.each do |alert_type, notice| %>
flash_notice("<%= notice %>", "<%= alert_type %>");
<% end %>

$("#member-panel").html("<%= escape_javascript(render :partial => 'groups/member_panel', :locals => { is_reloading: true, show_listing_on_load: @show_listing_on_load }) %>");

<% if @show_listing_on_load == false %>
rotate($('#collapse-members'), 0, -5, -90);
<% end %>

// If the member modal is being displayed, keep it displayed.
// First test if the CSS display is set to 'block'. If the modal is closed, it will be set to 'hidden'.
var display_modal = ($('#edit-members').css('display') == 'block');
// The modals state should be open. Attach the bootstrap .modal() function to it, and remove the 'hide' and 'fade' css classes so it becomes displayed
if (display_modal)
{
$('#edit-members').modal();
$('#edit-members').removeClass('hide');
$('#edit-members').removeClass('fade');

// Hack to prevend double backdrops when redisplaying the modal.
$('.modal-backdrop').not(':last').remove();
}

<% if @members.count == 0 %>
$('#edit-members').modal('hide');
<% end %>

